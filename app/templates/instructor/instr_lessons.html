{% extends 'base.html' %} {% block content %}

<style>
  .body {
    font-family: "Times New Roman", sans-serif; 
  }
  .back-arrow {
    position: absolute; 
    top: 70px; 
    left: 10px;
  }

  .back-arrow a {
    color: #2c662d;
    text-decoration: none; 
    font-size: 30px;
  }

  .back-arrow a:hover {
    text-decoration: underline; 
  }
  .main-content {
    display: flex; /* 使用 flexbox 布局 */
    gap: 20px; /* 设置元素之间的间距 */
    padding-top: 20px; /* 距离顶部的间距 */
    margin-left: 50px; /* 左侧间距 */
    align-items: flex-start; /* 将元素顶部对齐 */
  }

  .filter-section {
    width: 20%; /* 调整宽度为容器的 20% */
    padding: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    border-radius: 5px;
    background-color: #f9f9f9;
  }

  form {
    margin: 80px 0 40px 0; /* Top and bottom margins remain the same, right margin is 0, left margin is 0 to align to left */
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    width: fit-content;
    display: block;
  }

  label {
    display: block; /* Each label on its own line */
    margin: 10px 0; /* Spacing above and below labels */
    font-size: 18px; /* Consistent font size */
    color: #333; /* Darker font color for better contrast */
  }

  form select, form input[type="date"], form input[type="number"] {
    font-size: 18px; /* Larger font size for better readability */
    color: #333; /* Match label color for consistency */
    padding: 10px; /* Padding for touch friendliness */
    margin-bottom: 10px; /* Space between form elements */
    border: 1px solid #ddd; /* Subtle border */
    border-radius: 5px; /* Match form border radius */
    background-color: white; /* White background for the input */
    line-height: 1.5; /* Increased line height for readability */
    display: block; /* Ensure inputs appear on a new line */
    width: 100%; /* Full width inputs */
  }

  form input[type="submit"] {
    padding: 10px 20px;
    background-color: #4CAF50; /* Example primary color */
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 18px;
    margin-top: 10px; /* Add some margin to the top */
  }

  form input[type="submit"]:hover {
    background-color: #45a049; /* A slightly darker shade on hover */
  }

  .card-container {
    display: flex; /* 启用 flexbox 布局 */
    flex-grow: 1; /* 允许卡片容器占据剩余空间 */
    gap: 10px;
  }
  .card {
    flex-grow: 1; /* 卡片平均分配剩余空间 */
  }

  /* Styles for each individual card */
  .card, .card-lesson {
    flex: 1;
    width: 500px; /* Each card will take up an equal amount of space */
    border-radius: 5px; /* Rounded corners of the card */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Shadow effect for the card */
    background-color: white;
  }

  /* Header styles for both types of cards */
  .card-header, .card-header-lesson {
    background-color: #2c662d; /* Background color for the header */
    color: white; /* Text color for the header */
    padding: 30px; /* Padding inside the header */
    border-top-left-radius: 5px; /* Rounded top-left corner */
    border-top-right-radius: 5px; /* Rounded top-right corner */
  }

  /* Content styles for both types of cards */
  .card-content, .card-content-lesson {
    padding: 30px; /* Padding inside the content area */
  }

  /* Item styles within the content for both types of cards */
  .lesson-item, .lesson-item-lesson {
    margin-bottom: 10px; /* Space between items */
  }

  /* Footer styles for both types of cards */
  .card-footer {
    padding: 20px; /* Padding inside the footer */
    background-color: #f1f1f1; /* Background color for the footer */
    border-bottom-left-radius: 5px; /* Rounded bottom-left corner */
    border-bottom-right-radius: 5px; /* Rounded bottom-right corner */
  }

  /* Button styles */
  .btn {
    padding: 10px 15px; /* Padding inside the button */
    margin-right: 5px; /* Space to the right of the button */
    border: none; /* No border */
    border-radius: 4px; /* Rounded corners */
    cursor: pointer; /* Pointer cursor on hover */
  }

  /* Additional styles for different button types */
  .btn.edit-lesson {
    background-color: #4CAF50; /* Green background */
    color: white; /* White text */
  }

  .btn.cancel-lesson {
    background-color: #f44336; /* Red background */
    color: white; /* White text */
  }

  .btn.add-lesson {
    background-color: #4CAF50; /* Green background */
    color: white; /* White text */
  }
</style>

<div>
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />

      <!-- Add your CSS links here -->
      <script>
        function filterCourses() {
          // Get filter values
          var statusFilter = document.getElementById("statusFilter").value;
          var dateFilter = document.getElementById("dateFilter").value;
          var memberIDFilter = document.getElementById("memberIDFilter").value;

          // Get all table rows
          var rows = document.querySelectorAll("#coursesTable tbody tr");

          // Convert NodeList to an array to use array methods
          rows = Array.from(rows);

          rows.forEach(function (row) {
            var status = row.querySelector(".status").textContent;
            var date = row.querySelector(".date").textContent;
            var memberID = row.querySelector(".member_id").textContent;

            // Check if row meets all filter criteria
            var statusMatch = statusFilter === "" || status === statusFilter;
            var dateMatch = dateFilter === "" || date === dateFilter;
            var memberIDMatch =
              memberIDFilter === "" || memberID === memberIDFilter;

            if (statusMatch && dateMatch && memberIDMatch) {
              row.style.display = ""; // show
            } else {
              row.style.display = "none"; // hide
            }
          });
        }
      </script>
    </head>
    <body>
      <body>
        <div class="back-arrow">
          <!-- Updated the href to point to the 'instructor_dashboard' route -->
          <a href="{{ url_for('instructor_dashboard') }}"
            >&#x2190; Back</a
          >
        </div>

        <div class="main-content">
          <!-- 过滤器部分、一对一课程卡片和课程卡片在同一水平线上 -->
          <div class="filter-section">
            <form action="{{ url_for('instructor_lessons') }}" method="get">
              <label for="statusFilter">Filter by status:</label>
              <select id="statusFilter" name="status">
                <option value="">All Statuses</option>
                <option value="Scheduled">Scheduled</option>
                <option value="Cancelled">Cancelled</option>
                <option value="Completed">Completed</option>
              </select>

              <label for="dateFilter">Filter by date:</label>
              <input type="date" id="dateFilter" name="date" placeholder="yyyy/mm/DD">

              <label for="memberIDFilter">Filter by Member ID:</label>
              <input type="number" id="memberIDFilter" name="member_id" min="1">

              <input type="submit" value="Filter">
            </form>
          </div>

          <div class="card-container">
            <!-- Card for One-on-One Lessons -->
            <div class="card">
              <h2 class="card-header">One-on-One Lessons</h2>
              <div class="card-content">
                {% for lesson in one_on_one_lessons %}
                <div class="lesson-item">
                  <strong>Member ID:</strong> {{ lesson['member_id'] }}<br />
                  <strong>User name:</strong> {{ lesson['user_name'] }}<br />
                  <strong>First name:</strong> {{ lesson['first_name'] }}<br />
                  <strong>Last name:</strong> {{ lesson['last_name'] }}<br />
                  <strong>Date:</strong> {{ lesson['date'] }}<br />
                  <strong>Start Time:</strong> {{ lesson['start_time'] }}<br />
                  <strong>End Time:</strong> {{ lesson['end_time'] }}<br />
                  <strong>Location ID:</strong> {{ lesson['location_id'] }}<br />
                  <strong>Price:</strong> {{ lesson['price'] }}<br />
                  <strong>Status:</strong> {{ lesson['status'] }}
                  <div class="lesson-actions">
                    <button class="btn edit-lesson">Edit</button>
                    <button class="btn cancel-lesson">Cancel</button>
                  </div>
                </div>
                {% endfor %}
              </div>
              <div class="card-footer">
                <button class="btn add-lesson">Add Lesson</button>
              </div>
            </div>

            <!-- Card for Lessons -->
            <div class="card-lesson">
              <h2 class="card-header-lesson">Lessons</h2>
              <div class="card-content-lesson">
                {% for lesson in group_lessons %}
                <div class="lesson-item-lesson">
                  <strong>Title:</strong> {{ lesson['title'] }}<br />
                  <strong>Date:</strong> {{ lesson['date'] }}<br />
                  <strong>Start Time:</strong> {{ lesson['start_time'] }}<br />
                  <strong>End Time:</strong> {{ lesson['end_time'] }}<br />
                  <strong>Location ID:</strong> {{ lesson['location_id'] }}<br />
                  <strong>Capacity:</strong> {{ lesson['capacity'] }}<br />
                  <strong>Price:</strong> {{ lesson['price'] }}
                  <div class="lesson-actions">
                    <button class="btn edit-lesson">Edit</button>
                    <button class="btn cancel-lesson">Cancel</button>
                  </div>
                </div>
                {% endfor %}
              </div>
              <div class="card-footer">
                <button class="btn add-lesson">Add Lesson</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Add your scripts if any -->
      </body>
    </html>
  </div>

  {% endblock %}