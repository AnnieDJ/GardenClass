{% extends 'member/member_dashboard.html' %} {% block content %}


<section>
<div class="container-custom">
  <h2 class="page-title">Available One-on-One Lessons</h2>
  <p class="subtitle">
    Browse and book personalized lessons with your chosen instructor
  </p>

  {% if msg %}
  <div class="alert alert-info">{{ msg }}</div>
  {% endif %}

  <div class="search-form-group">
    <form
      action="{{ url_for('search_1on1_lessons') }}"
      method="post"
      class="form-inline search-form"
    >
      <input
        type="text"
        class="form-control"
        name="lesson_name"
        placeholder="Enter 1on1 Lesson name"
      />
      <input
        type="date"
        class="form-control"
        name="date"
        placeholder="Enter Date"
      />
      <input
        type="text"
        class="form-control"
        name="location"
        placeholder="Enter Location"
      />
      <button type="submit" class="btn btn-primary search-btn">Search</button>
      <button
        type="button"
        class="btn btn-info cancel-btn"
        onclick="clearForm()"
      >
        Cancel
      </button>
    </form>
  </div>

  <table class="table table-striped lesson-table">
    <thead>
      <tr>
        <th><strong>Instructor</strong></th>
        <th><strong>Topic</strong></th>
        <th><strong>Date</strong></th>
        <th><strong>Start Time</strong></th>
        <th><strong>End Time</strong></th>
        <th><strong>Location</strong></th>
        <th><strong>Price (NZ$)</strong></th>
        <th><strong>Action</strong></th>
      </tr>
    </thead>

    <tbody>
      {% for lesson in one_on_one_lessons_data %}

      <tr class="lesson-item">
        <td>{{ lesson.instructor_id }}</td>
        <td>{{ lesson.lesson_name }}</td>
        <td>{{ lesson.date }}</td>
        <td>{{ lesson.start_time }}</td>
        <td>{{ lesson.end_time }}</td>
        <td>{{ lesson.location_id }}</td>
        <td>{{ lesson.price }}</td>
        <td>
          <button onclick="showBookingSummary({{ lesson }})" class="btn btn-primary">Book Now</button>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="9">No available lessons at this moment.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="back-to-list">
    <a href="{{ url_for('member_view_instr') }}" class="btn btn-secondary"
      >Back</a
    >
  </div>
</section>

  {% endblock %}

  <script>
    function clearForm() {
      document.querySelector(".search-form").reset();
    }
  </script>
</div>
